---
// Datos de exámenes - Editar aquí para añadir/modificar exámenes
const examenes = {
    '2025-11-25': { asignatura: 'Gramatica y Vocabulario Inglés', hora: '', aula: 'A101' },
};

// Función para generar los días del mes
function generarDiasMes(año, mes) {
    const diasEnMes = new Date(año, mes, 0).getDate();
    const primerDia = new Date(año, mes - 1, 1).getDay();
    const espaciosVacios = primerDia === 0 ? 6 : primerDia - 1;

    const dias = [];

    // Días vacíos
    for (let i = 0; i < espaciosVacios; i++) {
        dias.push({ vacio: true });
    }

    // Días del mes
    for (let dia = 1; dia <= diasEnMes; dia++) {
        const fecha = `${año}-${mes.toString().padStart(2, '0')}-${dia.toString().padStart(2, '0')}`;
        const examen = examenes[fecha];

        dias.push({
            numero: dia,
            fecha: fecha,
            examen: examen || null,
            vacio: false
        });
    }

    // Completar la última semana si es necesario
    while (dias.length % 7 !== 0) {
        dias.push({ vacio: true });
    }

    return dias;
}

// Generar calendarios para cada mes
const septiembre = generarDiasMes(2025, 9);
const octubre = generarDiasMes(2025, 10);
const noviembre = generarDiasMes(2025, 11);
const diciembre = generarDiasMes(2025, 12);

// Función para dividir en semanas
function dividirEnSemanas(dias) {
    const semanas = [];
    for (let i = 0; i < dias.length; i += 7) {
        semanas.push(dias.slice(i, i + 7));
    }
    return semanas;
}
---

<section class="calendario-section" id="calendar">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Calendario de Exámenes</h2>
            <p class="section-subtitle">1º Trimestre</p>
        </div>

        <div class="calendario-container">
            <div class="meses-grid">
                <div class="mes">
                    <h3 class="mes-titulo">Septiembre 2025</h3>
                    <table class="calendario-tabla">
                        <thead>
                            <tr>
                                <th>L</th>
                                <th>M</th>
                                <th>X</th>
                                <th>J</th>
                                <th>V</th>
                                <th>S</th>
                                <th>D</th>
                            </tr>
                        </thead>
                        <tbody>
                            {dividirEnSemanas(septiembre).map(semana => (
                                <tr>
                                    {semana.map(dia => (
                                        <td class={dia.vacio ? 'dia-vacio' : (dia.examen ? 'dia tiene-examen' : 'dia')}>
                                            {!dia.vacio && (
                                                <>
                                                    <div class="numero-dia">{dia.numero}</div>
                                                    {dia.examen && (
                                                        <div class="examen-info">
                                                            <div class="asignatura">{dia.examen.asignatura}</div>
                                                            <div class="hora">{dia.examen.hora}</div>
                                                        </div>
                                                    )}
                                                </>
                                            )}
                                        </td>
                                    ))}
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>

                <div class="mes">
                    <h3 class="mes-titulo">Octubre 2025</h3>
                    <table class="calendario-tabla">
                        <thead>
                            <tr>
                                <th>L</th>
                                <th>M</th>
                                <th>X</th>
                                <th>J</th>
                                <th>V</th>
                                <th>S</th>
                                <th>D</th>
                            </tr>
                        </thead>
                        <tbody>
                            {dividirEnSemanas(octubre).map(semana => (
                                <tr>
                                    {semana.map(dia => (
                                        <td class={dia.vacio ? 'dia-vacio' : (dia.examen ? 'dia tiene-examen' : 'dia')}>
                                            {!dia.vacio && (
                                                <>
                                                    <div class="numero-dia">{dia.numero}</div>
                                                    {dia.examen && (
                                                        <div class="examen-info">
                                                            <div class="asignatura">{dia.examen.asignatura}</div>
                                                            <div class="hora">{dia.examen.hora}</div>
                                                        </div>
                                                    )}
                                                </>
                                            )}
                                        </td>
                                    ))}
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>

                <div class="mes">
                    <h3 class="mes-titulo">Noviembre 2025</h3>
                    <table class="calendario-tabla">
                        <thead>
                            <tr>
                                <th>L</th>
                                <th>M</th>
                                <th>X</th>
                                <th>J</th>
                                <th>V</th>
                                <th>S</th>
                                <th>D</th>
                            </tr>
                        </thead>
                        <tbody>
                            {dividirEnSemanas(noviembre).map(semana => (
                                <tr>
                                    {semana.map(dia => (
                                        <td class={dia.vacio ? 'dia-vacio' : (dia.examen ? 'dia tiene-examen' : 'dia')}>
                                            {!dia.vacio && (
                                                <>
                                                    <div class="numero-dia">{dia.numero}</div>
                                                    {dia.examen && (
                                                        <div class="examen-info">
                                                            <div class="asignatura">{dia.examen.asignatura}</div>
                                                            <div class="hora">{dia.examen.hora}</div>
                                                        </div>
                                                    )}
                                                </>
                                            )}
                                        </td>
                                    ))}
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>

                <div class="mes">
                    <h3 class="mes-titulo">Diciembre 2025</h3>
                    <table class="calendario-tabla">
                        <thead>
                            <tr>
                                <th>L</th>
                                <th>M</th>
                                <th>X</th>
                                <th>J</th>
                                <th>V</th>
                                <th>S</th>
                                <th>D</th>
                            </tr>
                        </thead>
                        <tbody>
                            {dividirEnSemanas(diciembre).map(semana => (
                                <tr>
                                    {semana.map(dia => (
                                        <td class={dia.vacio ? 'dia-vacio' : (dia.examen ? 'dia tiene-examen' : 'dia')}>
                                            {!dia.vacio && (
                                                <>
                                                    <div class="numero-dia">{dia.numero}</div>
                                                    {dia.examen && (
                                                        <div class="examen-info">
                                                            <div class="asignatura">{dia.examen.asignatura}</div>
                                                            <div class="hora">{dia.examen.hora}</div>
                                                        </div>
                                                    )}
                                                </>
                                            )}
                                        </td>
                                    ))}
                                </tr>
                            ))}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</section>


<style>
.calendario-section {
    padding: 60px 0;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 24px;
}

.section-header {
    text-align: center;
    margin-bottom: 60px;
}

.section-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 16px;
    background: linear-gradient(45deg, #001e60, #003d99);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.section-subtitle {
    font-size: 1.25rem;
    color: #64748b;
    font-weight: 400;
}

.calendario-container {
    background: white;
    border-radius: 24px;
    padding: 40px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.08);
}

.meses-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
}

.mes {
    background: #f8fafc;
    border-radius: 16px;
    padding: 24px;
    border: 1px solid #e2e8f0;
}

.mes-titulo {
    font-size: 1.5rem;
    font-weight: 600;
    color: #001e60;
    margin-bottom: 20px;
    text-align: center;
}


.calendario-tabla {
    width: 100%;
    border-collapse: collapse;
    border-spacing: 0;
    border: 2px solid #e2e8f0;
    border-radius: 12px;
    overflow: hidden;
}

.calendario-tabla th {
    background: linear-gradient(135deg, #001e60 0%, #003d99 100%);
    color: white;
    padding: 12px 8px;
    text-align: center;
    font-weight: 600;
    font-size: 0.875rem;
    border: none;
}

.calendario-tabla td {
    width: 14.28%;
    height: 80px;
    border: 1px solid #e2e8f0;
    position: relative;
    vertical-align: top;
    padding: 4px;
}

.dia {
    background: white;
    height: 100%;
    position: relative;
}

.dia-vacio {
    background: #f8fafc;
}

.dia.tiene-examen {
    background: linear-gradient(135deg, #001e60 0%, #003d99 100%);
    color: white;
}

.numero-dia {
    position: absolute;
    top: 4px;
    left: 6px;
    font-weight: 600;
    font-size: 0.875rem;
    color: #374151;
}

.dia.tiene-examen .numero-dia {
    color: white;
}

.examen-info {
    position: absolute;
    bottom: 4px;
    left: 4px;
    right: 4px;
    text-align: center;
    font-size: 0.6rem;
    line-height: 1.1;
}

.examen-info .asignatura {
    font-weight: 700;
    margin-bottom: 2px;
    text-transform: uppercase;
}

.examen-info .hora {
    font-weight: 500;
    opacity: 0.9;
}

/* Responsive */
@media (max-width: 1024px) {
    .meses-grid {
        grid-template-columns: 1fr;
        gap: 32px;
    }
}

@media (max-width: 768px) {
    .calendario-section {
        padding: 40px 0;
    }

    .section-title {
        font-size: 2rem;
    }

    .calendario-container {
        padding: 24px;
    }

    .mes {
        padding: 16px;
    }

    .calendario-tabla td {
        height: 60px;
    }

    .numero-dia {
        font-size: 0.75rem;
    }

    .examen-info {
        font-size: 0.5rem;
    }

    .examen-info .asignatura {
        margin-bottom: 1px;
    }
}

@media (max-width: 480px) {
    .calendario-tabla td {
        height: 50px;
    }

    .numero-dia {
        font-size: 0.7rem;
        top: 2px;
        left: 4px;
    }

    .examen-info {
        font-size: 0.45rem;
        bottom: 2px;
    }

    .calendario-tabla th {
        padding: 8px 4px;
        font-size: 0.75rem;
    }
}
</style>